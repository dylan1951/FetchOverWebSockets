parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"b1lQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebSock=void 0;var e=function(e,t,r,i){return new(r||(r=Promise))(function(n,s){function o(e){try{c(i.next(e))}catch(t){s(t)}}function u(e){try{c(i.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,u)}c((i=i.apply(e,t||[])).next())})},t=function(e,t){var r,i,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(u){s=[6,u],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},r=!1,i=41943040,n=function(){try{var e=new Uint8Array([1,2,3]);return String.fromCharCode.apply(null,e),function(e){return String.fromCharCode.apply(null,e)}}catch(t){return function(e){return String.fromCharCode.apply(null,Array.prototype.slice.call(e))}}}(),s=function(){function s(){this._websocket=null,this._rQi=0,this._rQlen=0,this._rQbufferSize=4194304,this._rQmax=this._rQbufferSize/8,this.receiveQueue=null,this._sQbufferSize=10240,this._sQlen=0,this.sendQueue=null,this._eventHandlers={message:function(){},open:function(){},close:function(){},error:function(){}}}return s.prototype.get_sQ=function(){return this.sendQueue},s.prototype.get_rQ=function(){return this.receiveQueue},s.prototype.get_rQi=function(){return this._rQi},s.prototype.set_rQi=function(e){this._rQi=e},s.prototype.rQlen=function(){return this._rQlen-this._rQi},s.prototype.rQpeek8=function(){return this.receiveQueue[this._rQi]},s.prototype.rQshift8=function(){return this.receiveQueue[this._rQi++]},s.prototype.rQskip8=function(){this._rQi++},s.prototype.rQskipBytes=function(e){this._rQi+=e},s.prototype.rQshift16=function(){return(this.receiveQueue[this._rQi++]<<8)+this.receiveQueue[this._rQi++]},s.prototype.rQshift32=function(){return(this.receiveQueue[this._rQi++]<<24)+(this.receiveQueue[this._rQi++]<<16)+(this.receiveQueue[this._rQi++]<<8)+this.receiveQueue[this._rQi++]},s.prototype.receiveQueueShift=function(e){void 0===e&&(e=this.rQlen());var t=new Uint8Array(this.receiveQueue.buffer,this._rQi,e);return this._rQi+=e,n(t)},s.prototype.rQshiftBytes=function(e){return void 0===e&&(e=this.rQlen()),this._rQi+=e,new Uint8Array(this.receiveQueue.buffer,this._rQi-e,e)},s.prototype.rQshiftTo=function(e,t){void 0===t&&(t=this.rQlen()),e.set(new Uint8Array(this.receiveQueue.buffer,this._rQi,t)),this._rQi+=t},s.prototype.rQwhole=function(){return new Uint8Array(this.receiveQueue.buffer,0,this._rQlen)},s.prototype.rQslice=function(e,t){return t?new Uint8Array(this.receiveQueue.buffer,this._rQi+e,t-e):new Uint8Array(this.receiveQueue.buffer,this._rQi+e,this._rQlen-this._rQi-e)},s.prototype.flush=function(){if(this._sQlen>0&&this._websocket.readyState===WebSocket.OPEN){var e=this._encode_message();this._websocket.send(e),this._sQlen=0}},s.prototype.send=function(e){this.sendQueue.set(e,this._sQlen),this._sQlen+=e.length,this.flush()},s.prototype.send_string=function(e){this.send(e.split("").map(function(e){return e.charCodeAt(0)}))},s.prototype.off=function(e){this._eventHandlers[e]=function(){}},s.prototype.on=function(e,t){this._eventHandlers[e]=t},s.prototype._allocate_buffers=function(){this.receiveQueue=new Uint8Array(this._rQbufferSize),this.sendQueue=new Uint8Array(this._sQbufferSize)},s.prototype.init=function(){this._allocate_buffers(),this._rQi=0,this._websocket=null},s.prototype.open=function(e,t){e.match(/^([a-z]+):\/\//)[1];this.init(),this._websocket=t?new WebSocket(e,t):new WebSocket(e),this._websocket.binaryType="arraybuffer",this._websocket.onmessage=this._recv_message.bind(this),this._websocket.onopen=function(){console.debug(">> WebSock.onopen"),this._websocket.protocol&&console.info("Server choose sub-protocol: "+this._websocket.protocol),this._eventHandlers.open(),console.debug("<< WebSock.onopen")}.bind(this),this._websocket.onclose=function(e){console.debug(">> WebSock.onclose"),this._eventHandlers.close(e),console.debug("<< WebSock.onclose")}.bind(this),this._websocket.onerror=function(e){console.debug(">> WebSock.onerror: "+e),this._eventHandlers.error(e),console.debug("<< WebSock.onerror: "+e)}.bind(this)},s.prototype.close=function(){this._websocket&&(this._websocket.readyState!==WebSocket.OPEN&&this._websocket.readyState!==WebSocket.CONNECTING||(console.info("Closing WebSocket connection"),this._websocket.close()),this._websocket.onmessage=function(e){})},s.prototype._encode_message=function(){return new Uint8Array(this.sendQueue.buffer,0,this._sQlen)},s.prototype._expand_compact_rQ=function(e){var t=e||this._rQlen-this._rQi>this._rQbufferSize/2;if(t&&(e?this._rQbufferSize=8*(this._rQlen-this._rQi+e):this._rQbufferSize*=2),this._rQbufferSize>i&&(this._rQbufferSize=i,this._rQbufferSize-this._rQlen-this._rQi<e))throw"Receive Queue buffer exceeded "+i+" bytes, and the new message could not fit";if(t){var n=this.receiveQueue.buffer;this._rQmax=this._rQbufferSize/8,this.receiveQueue=new Uint8Array(this._rQbufferSize),this.receiveQueue.set(new Uint8Array(n,this._rQi))}else r?this.receiveQueue.copyWithin(0,this._rQi):this.receiveQueue.set(new Uint8Array(this.receiveQueue.buffer,this._rQi));this._rQlen=this._rQlen-this._rQi,this._rQi=0},s.prototype._decode_message=function(e){var t=new Uint8Array(e);t.length>this._rQbufferSize-this._rQlen&&this._expand_compact_rQ(t.length),this.receiveQueue.set(t,this._rQlen),this._rQlen+=t.length},s.prototype._recv_message=function(r){return e(this,void 0,void 0,function(){var e,i;return t(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this._decode_message(r.data),this.rQlen()>0?[4,this._eventHandlers.message()]:[3,2];case 1:return t.sent(),this._rQlen==this._rQi?(this._rQlen=0,this._rQi=0):this._rQlen>this._rQmax&&this._expand_compact_rQ(),[3,3];case 2:console.debug("Ignoring empty message"),t.label=3;case 3:return[3,5];case 4:return e=t.sent(),i="",e.name&&(i+="\n    name: "+e.name+"\n",i+="    message: "+e.message+"\n"),void 0!==e.description&&(i+="    description: "+e.description+"\n"),void 0!==e.stack&&(i+=e.stack),i.length>0?console.error("recv_message, caught exception: "+i):(console.error,console.error("recv_message, caught exception: "+e)),void 0!==e.name?this._eventHandlers.error(e.name+": "+e.message):this._eventHandlers.error(e),[3,5];case 5:return[2]}})})},s}();exports.WebSock=s;
},{}]},{},["b1lQ"], null)